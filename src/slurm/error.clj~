(ns slurm.error
  (:use [clojure.contrib.error-kit]))

;; TODO: dump messages into a log

;; Error definitions (break flow)
(deferror SchemaError
  []
  "General schema fault container"
  [error]
  (println (str "=== Schema Error ===\n" error)))

(deferror SchemaErrorBadTableName
  [SchemaError]
  "Table name not provided or otherwise bad"
  [error]
  (println "No :name key or bad table name provided."))


;; Warning definitions (should not break flow)
(deferror SchemaWarning
  []
  "General schema warning container"
  [warning]
  (println (str "--- Schema Warning ---\n" warning)))

(deferror SchemaWarningUnknownKeys
  [SchemaWarning]
  "A warning (continues) if the definition contains unrecognized keys"
  [warning]
  (println "There were unrecognized keys found in your schema definition, they will be ignored."))